<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AreaHealth Login</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .overlay {
      background: rgba(255, 255, 255, 0.25);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border: 1px solid rgba(255, 255, 255, 0.18);
    }
    .typewriter {
      border-right: .15em solid #4B5563;
      white-space: nowrap;
      overflow: hidden;
      display: inline-block;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .fade-in {
      animation: fadeIn 1s ease-out;
    }
    .spinner {
      border: 3px solid rgba(255, 255, 255, 0.3);
      border-top: 3px solid #828CFF;
      border-radius: 50%;
      width: 20px;
      height: 20px;
      animation: spin 1s linear infinite;
      display: inline-block;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body class="relative flex items-center justify-center h-screen bg-gray-900 text-gray-800">

  <!-- Gradient background -->
  <div class="absolute inset-0 bg-gradient-to-br from-[#1a1c2c] via-[#2d325a] to-[#828CFF] opacity-90"></div>

  <!-- Login card -->
  <div class="overlay relative z-10 p-10 rounded-2xl shadow-2xl w-[400px] text-center fade-in">
    <img src="FB_IMG_17580202436038222.jpg" alt="AreaHealth Logo" class="w-20 h-20 mx-auto mb-4 drop-shadow-lg">
    <h1 id="welcomeText" class="typewriter text-lg font-semibold text-gray-900 mb-6"></h1>
    <h2 class="text-2xl font-bold mb-6 text-gray-900">Login to AreaHealth-NG</h2>

    <label class="flex items-center justify-center mb-4 text-sm text-gray-700">
      <input type="checkbox" id="termsCheckbox" class="mr-2" required>
      I agree to the <a href="#" id="termsLink" class="text-black-600 underline">Terms & Conditions</a>
    </label>

    <button id="googleLogin"
      class="w-full flex items-center justify-center gap-3 bg-[#828CFF] text-white px-4 py-2 rounded-lg shadow-lg hover:shadow-xl hover:scale-105 transition transform duration-200">
      <img src="https://www.svgrepo.com/show/355037/google.svg" class="w-5 h-5" alt="Google">
      Sign in with Google
    </button>

    <div id="status" class="mt-4 text-sm text-gray-700"></div>
    <div id="spinner" class="mt-4 hidden"><span class="spinner"></span> <span class="text-sm text-gray-700">Processing...</span></div>

    <p class="mt-8 text-xs text-gray-600">¬© 2025 AreaHealth Tech | Tailwind & Firebase</p>
    <div class="mt-4 text-xs text-gray-700 bg-white/40 p-2 rounded-lg shadow-inner">
      <p>üíª Developed by <span class="font-semibold">Rt Hon. Onyeka-Udechukwu Miracle</span></p>
      <p>Email: <a href="mailto:onyekamiracle08@gmail.com" class="text-blue-600 underline">onyekamiracle08@gmail.com</a></p>
      <p>Phone: <a href="tel:08169395022" class="text-blue-600 underline">08169395022</a></p>
    </div>
  </div>

  <!-- Terms & Conditions Modal -->
  <div id="termsModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
    <div class="bg-white rounded-lg shadow-xl w-11/12 max-w-2xl p-6 relative max-h-[80vh] overflow-y-auto">
      <button id="closeModal" class="absolute top-3 right-3 text-gray-500 hover:text-red-600 text-xl">&times;</button>
      <h2 class="text-xl font-bold mb-3 text-center text-gray-800">AreaHealth-NG Terms & Conditions</h2>

      <div class="text-sm text-gray-700 space-y-3">
        <p><strong>1. Introduction</strong><br>
        Welcome to AreaHealth NG. By accessing or using our website, mobile application, or services, you agree to be bound by these Terms and Conditions. If you do not agree, you must not use our services.</p>

        <p><strong>2. Services Provided</strong><br>
        AreaHealth NG connects users to nearby pharmacies, enabling access to essential medications, preventive health products, and verified health information. We do not provide medical advice or replace professional healthcare consultations.</p>

        <p><strong>3. Eligibility</strong><br>
        You must be at least 18 years old or have parental/guardian consent to use our services.</p>

        <p><strong>4. User Responsibilities</strong><br>
        ‚Ä¢ Provide accurate and truthful information.<br>
        ‚Ä¢ Use valid prescriptions for prescription-only medications.<br>
        ‚Ä¢ Avoid misuse of the platform for fraudulent or illegal purposes.</p>

        <p><strong>5. Disclaimers</strong><br>
        AreaHealth NG does not guarantee uninterrupted availability of products and services. We are not responsible for any adverse effects or damages caused by products purchased from third-party pharmacies.</p>

        <p><strong>6. Intellectual Property</strong><br>
        All content, trademarks, and branding on AreaHealth NG are the property of AreaHealth NG and may not be used without prior written permission.</p>

        <p><strong>7. Limitation of Liability</strong><br>
        To the fullest extent permitted by law, AreaHealth NG shall not be liable for any indirect, incidental, or consequential damages.</p>

        <p><strong>8. Privacy & Data Protection</strong><br>
        Your personal and health-related data will be handled according to our Privacy Policy and in compliance with the NDPR.</p>

        <p><strong>9. Changes to Terms</strong><br>
        We reserve the right to modify these Terms at any time. Updates will be posted on our website.</p>

        <p><strong>10. Governing Law</strong><br>
        These Terms shall be governed by and construed under the laws of the Federal Republic of Nigeria.</p>
      </div>
    </div>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
    import { 
      getAuth, GoogleAuthProvider, signInWithPopup, sendEmailVerification, onAuthStateChanged, signOut 
    } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";

    const firebaseConfig = {  
      apiKey: "AIzaSyC79cSDPpC4bbhlRBpu7WhON3j8AMxMLyE",  
      authDomain: "areahealth-ng.firebaseapp.com",  
      projectId: "areahealth-ng",  
      storageBucket: "areahealth-ng.appspot.com",  
      messagingSenderId: "986651954303",  
      appId: "1:986651954303:web:3f38dc24e246b7047d834a"  
    };  
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const provider = new GoogleAuthProvider();

    const googleLoginBtn = document.getElementById("googleLogin");
    const statusEl = document.getElementById("status");
    const spinnerEl = document.getElementById("spinner");
    const termsCheckbox = document.getElementById("termsCheckbox");

    googleLoginBtn.addEventListener("click", async () => {
      if (!termsCheckbox.checked) {
        alert("You must agree to the Terms & Conditions before signing in.");
        return;
      }

      try {
        statusEl.textContent = "";
        spinnerEl.classList.remove("hidden");
        const result = await signInWithPopup(auth, provider);
        const user = result.user;

        if (user.emailVerified) {
          spinnerEl.classList.add("hidden");
          statusEl.textContent = "‚úÖ Verified. Redirecting...";
          window.location.href = "index.html";
        } else {
          spinnerEl.classList.add("hidden");
          statusEl.textContent = "üìß Verification email sent. Please check your inbox.";
          await sendEmailVerification(user);
          await signOut(auth);
        }
      } catch (error) {
        spinnerEl.classList.add("hidden");
        console.error(error);
        statusEl.textContent = "‚ùå " + error.message;
      }
    });

    onAuthStateChanged(auth, (user) => {
      if (user && user.emailVerified) {
        window.location.href = "index.html";
      }
    });

    // Typewriter rotating text
    const messages = [
      "üéì Welcome Pharmacist üë©‚Äçüéì",
      "üë®‚Äçüè´ Welcome Staff",
      "üëî Welcome Patients",
      "üéâ Welcome to AreaHealth-NG"
    ];
    let messageIndex = 0;
    let charIndex = 0;
    const welcomeEl = document.getElementById("welcomeText");

    function typeMessage() {
      if (charIndex < messages[messageIndex].length) {
        welcomeEl.textContent += messages[messageIndex].charAt(charIndex);
        charIndex++;
        setTimeout(typeMessage, 100);
      } else {
        setTimeout(eraseMessage, 2000);
      }
    }
    function eraseMessage() {
      if (charIndex > 0) {
        welcomeEl.textContent = messages[messageIndex].substring(0, charIndex - 1);
        charIndex--;
        setTimeout(eraseMessage, 50);
      } else {
        messageIndex = (messageIndex + 1) % messages.length;
        setTimeout(typeMessage, 500);
      }
    }
    typeMessage();

    // Terms modal logic
    const termsLink = document.getElementById("termsLink");
    const termsModal = document.getElementById("termsModal");
    const closeModal = document.getElementById("closeModal");

    termsLink.addEventListener("click", (e) => {
      e.preventDefault();
      termsModal.classList.remove("hidden");
      termsModal.classList.add("flex");
    });
    closeModal.addEventListener("click", () => {
      termsModal.classList.add("hidden");
      termsModal.classList.remove("flex");
    });
    termsModal.addEventListener("click", (e) => {
      if (e.target === termsModal) {
        termsModal.classList.add("hidden");
        termsModal.classList.remove("flex");
      }
    });
  </script>
</body>
</html>
